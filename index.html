<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="UTF-8">

    <!-- Make mobile layout scale correctly -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#fff890">
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<title>ATTENDANCERS</title>

<style>

    body {

        font-family: Arial, sans-serif;

        background:linear-gradient(180deg,#120500 50%,#ff8623 75%, #fd00e4 100%);

        display: flex;

        flex-direction: column;

        align-items: center;

        margin-top: 40px;

    }

    h1 {

        color: #333;

    }

    #gameContainer {

        margin-top: 20px;

        padding: 20px;

        background: white;

        border-radius: 10px;

        box-shadow: 0 0 10px rgba(0,0,0,0.1);

        background-color: #650606;

    width: min(92vw, 360px);

        text-align: center;

        display: none;

    }

    #randomNumber {

        font-size: 40px;

        font-weight: bold;

        margin-bottom: 20px;

    }

    #timeDisplay {

        font-size: 22px;

        margin-bottom: 15px;

    }

    #startBtn {

        margin-top: 25px;

        font-size: 25px;

    }

    input {

        padding: 10px;

        width: 160px;

        font-size: 16px;

        margin-bottom: 15px;

    }

    button {

        padding: 10px 18px;

        font-size: 16px;

        cursor: pointer;

        border: none;

        background: #28d609;

        color: rgb(0, 0, 0);

        border-radius: 5px;

    }

    #summary {

        margin-top: 20px;

        width: min(94vw, 640px);

        line-height: 1.5;

        padding: 12px 14px;

    }

    .notifyBox {
    padding: 12px 18px;
    min-width: 220px;
    color: white;
    font-size: 16px;
    border-radius: 6px;
    text-align: center;
    opacity: 0;
    transform: translateY(20px);
    animation: notifyIn 0.25s forwards, notifyOut 0.4s forwards 2.8s;
}

/* Retro 8-bit theme */
body.retro {
    background: linear-gradient(180deg,#02040a 0%, #061028 100%);
    color: #cfe7a8;
}

/* CRT scanline overlay */
body.retro::after{
    content: "";
    position: fixed; inset:0; pointer-events:none; mix-blend-mode:overlay;
    background-image: repeating-linear-gradient(rgba(255,255,255,0.02) 0 1px, transparent 1px 3px);
}

h1{ font-family:'Press Start 2P', monospace; color:#ff8623; text-shadow: 0 0 8px rgba(255, 198, 123, 0.12), 2px 2px 0 rgb(255, 54, 54); font-size:36px; }

#gameContainer.retro, #gameContainer { background: linear-gradient(180deg,#061227 0%, #091a2d 100%); border:6px solid #081118; box-shadow: 0 0 0 4px rgba(0,0,0,0.6), 0 8px 20px rgba(0,0,0,0.6); color:#dfffcf; }

#randomNumber{ font-family:'Press Start 2P', monospace; font-size:48px; color:#ffffff; text-shadow: 0 0 10px rgba(71,255,138,0.15); image-rendering: pixelated; }

#timeDisplay, #pointDisplay{ font-family:monospace; font-weight:700; color:#fff; background:#001018; padding:6px 10px; border-radius:6px; display:inline-block; margin:6px 6px; border:2px solid #07303a; }

button{ font-family: 'Press Start 2P', monospace; background:linear-gradient(#0b2,#093); border:4px solid #222; box-shadow: 0 6px 0 #111; color:#040404; }
button:active{ transform:translateY(3px); box-shadow:0 3px 0 #111 inset; }

input{ background:#000; color:#7fff9e; border:3px solid #043; padding:10px; font-family:monospace; }

#leaderboard{ font-family:monospace; background:linear-gradient(#071118,#051019); color:#e01d54; border:3px solid #082326; }

/* UID visual style in leaderboard */
#leaderboard li .uid { color: #965478; opacity: 0.9; margin-left:6px; font-size:0.65em;font-family:'Press Start 2P', monospace; }
/* Device label in leaderboard */
#leaderboard li .device { color: #965478; opacity: 0.95; margin-right:6px; font-size:0.65em; font-family:'Press Start 2P', monospace;}

#leaderboard li .score {
    color: #000000;
    font-weight: 100;
    font-family: 'Press Start 2P', monospace;
    background:transparent;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 12px;
    display: inline-block;
    margin-left: -12px;
}
/*chane "highestscoreleaderboard" title color*/
#leaderboardContainer h1 { color: #f57b3a; text-shadow: 0 0 8px rgba(129, 171, 255, 0.2);font-size: 18px; }

.notifyBox{ font-family:monospace; font-size:12px; border:2px solid #052; background:linear-gradient(#0b2,#093); box-shadow:none; font-family: 'Press Start 2P', monospace; }

/* small pixel-ish corner accents */
#gameContainer:before{ content:''; position:absolute; left:12px; top:12px; width:10px; height:10px; background:#7bffb2; box-shadow:18px 0 #7bffb2, 0 18px #7bffb2; opacity:0.12; }

/* apply retro body style by default */
body { transform: none; }

/* Retro styling for the summary panel */
#summary {
    font-family: 'Press Start 2P', monospace;
    background: linear-gradient(180deg,#210f05 0%, #27071e 100%);
    color: #d84a27;
    border: 5px solid #3a0707;
    padding: 14px 16px;
    border-radius: 6px;
    box-shadow: 0 8px 0 rgba(0,0,0,0.6), inset 0 2px 0 rgba(255,255,255,0.02);
    text-align: center;
    position: relative;
    font-size: 12px;
}

#summary strong { color: #ff3939; display:block; margin-bottom:6px; font-size:20px; }

#summary:before, #summary:after{
    content:''; position:absolute; width:8px; height:8px; background:#7bffb2; opacity:0.08;
}
#summary:before{ left:8px; top:8px; box-shadow: 14px 0 #937bff, 0 14px #937bffa4; }
#summary:after{ right:8px; bottom:8px; box-shadow: -14px 0 #937bff, 0 -14px #937bffa4; }

@keyframes notifyIn {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes notifyOut {
    to {
        opacity: 0;
        transform: translateY(20px);
    }
}

</style>

</head>

<body>

<h1>ATTENDANCERS</h1>

<style>
/* Additional responsive tweaks for small screens */
#leaderboardContainer { width: min(94vw, 360px); }
@media (max-width: 420px) {
    body { margin-top: 12px; }
    #randomNumber { font-size: 32px; }
    #timeDisplay { font-size: 20px; }
    button { padding: 12px 20px; font-size: 18px; }
    input { width: 80%; font-size: 18px; }
    #summary { width: min(94vw, 360px); }
    #gameContainer { padding: 12px; }
}

/* Larger screen tweaks for summary */
@media (min-width: 700px) {
    #summary { width: min(90vw, 640px); padding: 20px 24px; font-size: 14px; }
}
</style>



<div id="summary">

    <strong>Game Rules</strong><br>

    • You start with <b>10 seconds</b> at the beginning.<br>

    • A random number will appear, type it correctly.<br>

    • Correct answers give you points equal to the number of digits, as well as refilling your time.<br>

    • Wrong answers takes time from you depends on the number of digits.<br>

    • Each digit length is asked <b>5 times</b>, then the digit count increases, as well as increasing the max time limit.<br>

    • Upon completing 8-digit numbers (every 180 points), digit length is reset to 1 and timer gets faster!. <br>

    • Try to get the highest score possible! The game continues forever until you quit. <br>
    
    Good luck! <br>
   
    <div id="bestScoreDisplay" style="margin-top:10px; font-size:20px;">
    Your Highest Score: 0
</div>


</div>

<button id="startBtn">Start Game</button>


<div id="gameContainer">
  

    <div id="timeDisplay">Time: 10</div>
 
    <div id="pointDisplay">Point: 0</div>

    <div id="randomNumber"></div>

    <input id="userInput" placeholder="Type number...">

    <br>

    <button id="submitBtn">Submit</button>
    <button id="quitBtn" style="background:linear-gradient(180deg,#ab0101 5%, #ff8080 100%); color:#000000; margin-left:8px;">Quit Game</button>
</div>

<div id="notifyContainer" style="
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 9999;
"></div>

<!-- Tabbed Leaderboard / Auth UI -->
<div id="leaderboardContainer" style="margin-top:20px; width:340px; text-align:center;">
    <div class="tabs" style="display:flex; gap:6px; justify-content:center; margin-bottom:10px;">
        <button id="tabSign" class="tabBtn">Sign Up</button>
        <button id="tabLogin" class="tabBtn">Log In</button>
        <button id="tabBoard" class="tabBtn active">Leaderboard</button>
    </div>

    <div id="panelSign" class="tabPanel" style="display:none;">
        <div style="margin-bottom:8px;">Sign Up (enter 9-digit Player ID):</div>
        <input id="playerName" placeholder="123456789" maxlength="9" pattern="\d{9}" inputmode="numeric" style="width:200px; margin-bottom:8px;">
        <div>
            <button id="signUpBtn">Sign Up (Create new UID)</button>
            <span class="generatedUidDisplay" aria-live="polite" role="status" style="display:block; margin-top:8px; font-size:12px; color:#9fd3b4;"></span>
        </div>
    </div>

    <div id="panelLogin" class="tabPanel" style="display:none;">
        <div style="margin-top:4px; margin-bottom:8px;">Log In with your UID:</div>
        <input id="loginUidInput" placeholder="#ABC-123-DEF" style="width:200px; margin-bottom:8px;">
        <div>
            <button id="loginBtn">Log In</button>
            <span class="generatedUidDisplay" aria-live="polite" role="status" style="display:block; margin-top:8px; font-size:12px; color:#9fd3b4;"></span>
        </div>
    </div>

    <div id="panelBoard" class="tabPanel" style="display:block;">
        <div class="panel-actions">
            <div class="action-row">
                <button id="submitScoreBtn" class="actionBtn">Submit Highest Score</button>
                <button id="refreshBoardBtn" class="actionBtn secondary">Refresh Leaderboard</button>
            </div>
            <div class="action-row save-row">
                <input id="saveAsInput" placeholder="Change Player ID" maxlength="9" inputmode="numeric" class="actionInput">
                <button id="saveAsBtn" class="actionBtn positive">Confirm</button>
            </div>
        </div>
        <h1 style="margin:12px 0 6px 0;">Highest Score Leaderboard</h1>
        <div id="leaderboard" style="background:#fff; border-radius:8px; padding:10px; box-shadow:0 0 6px rgba(0,0,0,0.08); min-height:60px;"></div>
    </div>
</div>

<style>
/* Tab styles (retro) */
.tabBtn { font-family:'Press Start 2P', monospace; background:linear-gradient(#7e4e27 1%,#ff8623 100%); border:4px solid #222; box-shadow: 0 6px 0 #111; padding:8px 10px; font-size:11px; }
.tabBtn.active { background: linear-gradient(#ff8623,#ffb57a); box-shadow: 0 6px 0 #331100; color:#111; }
.tabPanel { background: linear-gradient(#071118,#051019); padding:10px; border-radius:6px; border:3px solid #082326; color:#cfe7a8; }

/* Panel action layout */
.panel-actions { display:flex; flex-direction:column; gap:8px; align-items:center; margin-bottom:6px; }
.panel-actions .action-row { display:flex; gap:8px; width:100%; justify-content:center; }
.panel-actions .action-row.save-row { gap:6px; }
.actionBtn { min-width:150px; padding:10px 12px; font-family:'Press Start 2P', monospace; font-size:11px; border:4px solid #222; box-shadow:0 6px 0 #111; background:linear-gradient(#982e8a 1%,#e044ff 100%); }
.actionBtn.secondary { background:#333; color:#fff; box-shadow:0 6px 0 #111; }
.actionBtn.positive { background:linear-gradient(#13842c 1%,#35ff23 100%); color:rgb(0, 0, 0); }
.actionInput { width:160px; padding:8px; border:3px solid #043; background:#000; color:#7fff9e; font-family:monospace; }



/* Make actions stack on narrow screens */
@media (max-width:420px) {
    .panel-actions .action-row { flex-direction:column; gap:8px; }
    .actionBtn { min-width:220px; }
    .actionInput { width:80%; }
}
</style>
<div style="margin-top:20px; font-size:12px; color:#666; text-align:center; max-width:340px;">
Version 2.7 <br>

</body>

<!-- Service worker registration (works on https or localhost) -->
<script>
if ('serviceWorker' in navigator) {
  let refreshing = false;

  window.addEventListener('load', () => {
    navigator.serviceWorker
      .register('service-worker.js')
      .then(reg => reg.update());

    navigator.serviceWorker.addEventListener(
      'controllerchange',
      () => {
        if (refreshing) return;
        refreshing = true;
        location.reload();
      }
    );
  });
}

</script>

<script type="module" src="game.js"></script>
</html>

